@if (entity(); as entity) {
  <mat-form-field>
    <mat-label>{{ 'Title' | translate }}</mat-label>
    <input
      matInput
      type="text"
      name="title"
      placeholder="{{ 'Enter a title' | translate }}"
      [(ngModel)]="entity.title"
      required
      (input)="onChangeInputValues()"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label>{{ 'Description' | translate }}</mat-label>
    <textarea
      matInput
      cdkTextareaAutosize
      type="text"
      name="description"
      placeholder="{{ 'Enter a description' | translate }}"
      [(ngModel)]="entity.description"
      required
    >
    </textarea>
  </mat-form-field>
}

@if (physicalEntity(); as physicalEntity) {
  <mat-form-field>
    <mat-label>{{ 'Collection' | translate }}</mat-label>
    <input
      matInput
      type="text"
      name="collection"
      placeholder="{{ 'Enter a collection' | translate }}"
      [(ngModel)]="physicalEntity.collection"
    />
  </mat-form-field>
}

@if (digitalEntity(); as digitalEntity) {
  <mat-form-field class="example-chip-list">
    <mat-label>{{ 'Tags (e.g. object type, discipline,...)' | translate }}</mat-label>
    <mat-chip-grid #tagChipList>
      @for (tag of digitalEntity.tags; track tag; let index = $index) {
        <mat-chip-row [removable]="true" (removed)="onRemove('tags', index)">
          {{ tag.value }}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip-row>
      }
      <input
        placeholder="{{ 'Add new or existing tag' | translate }}"
        #tagInput
        [formControl]="searchTag"
        [matAutocomplete]="tagAutoComplete"
        [matChipInputFor]="tagChipList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        (matChipInputTokenEnd)="addTag($event, digitalEntity)"
      />
    </mat-chip-grid>
    <mat-autocomplete
      #tagAutoComplete="matAutocomplete"
      (optionSelected)="selectTag($event, digitalEntity)"
    >
      @for (tag of filteredTags$ | async; track tag) {
        <mat-option [value]="tag._id">
          {{ tag.value }}
        </mat-option>
      }
    </mat-autocomplete>
    <mat-hint> {{ 'Seperate many tags by pressing comma or enter/return' | translate }} </mat-hint>
  </mat-form-field>
}
